@using SmashScheduler.Domain.Entities

<MudPaper Class="bench-section" Elevation="2">
    <MudStack Spacing="3">
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
            <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                <MudIcon Icon="@Icons.Material.Filled.Weekend" Color="Color.Secondary" />
                <MudText Typo="Typo.h6" Style="font-weight: 600;">On Bench</MudText>
            </MudStack>
            <MudChip T="string" Color="Color.Info" Size="Size.Small" Variant="Variant.Filled">
                @BenchedPlayers.Count() waiting
            </MudChip>
        </MudStack>
        @if (!BenchedPlayers.Any())
        {
            <div class="empty-state">
                <MudIcon Icon="@Icons.Material.Filled.Groups" Size="Size.Large" Color="Color.Secondary" />
                <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mt-2">All players on court!</MudText>
                <MudText Typo="Typo.body2" Color="Color.Secondary">No one waiting</MudText>
            </div>
        }
        else
        {
            <MudStack Spacing="2">
                @foreach (var player in BenchedPlayers)
                {
                    <PlayerCard Player="@player" GamesPlayed="@GetGamesPlayed(player.Id)" />
                }
            </MudStack>
        }
    </MudStack>
</MudPaper>

@code {
    [Parameter] public IEnumerable<Player> BenchedPlayers { get; set; } = Enumerable.Empty<Player>();
    [Parameter] public Dictionary<Guid, int> GamesPlayedLookup { get; set; } = new();

    private int? GetGamesPlayed(Guid playerId) =>
        GamesPlayedLookup.TryGetValue(playerId, out var count) ? count : null;
}
