@using SmashScheduler.Domain.Entities
@using SmashScheduler.Domain.Enums

<MudPaper Class="player-card" Elevation="1">
    <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween" Style="width: 100%;">
        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="3">
            <GenderStyledPlayerAvatar Player="Player"/>
            <MudText Typo="Typo.body1" Style="font-weight: 500;">@Player.Name</MudText>
        </MudStack>
        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
            @if (GamesPlayed.HasValue)
            {
                <MudChip T="string" Size="Size.Small" Variant="Variant.Text" Color="Color.Default">
                    @GamesPlayed games
                </MudChip>
            }
            <SkillLevelBadge SkillLevel="@Player.SkillLevel" />
            @if (ShowActions)
            {
                @if (OnAdd.HasDelegate)
                {
                    <MudIconButton Icon="@Icons.Material.Filled.Add"
                                   Size="Size.Medium"
                                   Color="Color.Success"
                                   Variant="Variant.Filled"
                                   OnClick="@(() => OnAdd.InvokeAsync(Player))" />
                }
                @if (OnRemove.HasDelegate)
                {
                    <MudIconButton Icon="@Icons.Material.Filled.Remove"
                                   Size="Size.Medium"
                                   Color="Color.Error"
                                   Variant="Variant.Filled"
                                   OnClick="@(() => OnRemove.InvokeAsync(Player))" />
                }
            }
        </MudStack>
    </MudStack>
</MudPaper>

@code {
    [Parameter, EditorRequired] public Player Player { get; set; } = null!;
    [Parameter] public bool ShowActions { get; set; }
    [Parameter] public int? GamesPlayed { get; set; }
    [Parameter] public EventCallback<Player> OnAdd { get; set; }
    [Parameter] public EventCallback<Player> OnRemove { get; set; }

    private string GetAvatarStyle() => Player.Gender switch
    {
        Gender.Female => "background-color: var(--smash-gender-female);",
        Gender.Male => "background-color: var(--smash-gender-male);",
        _ => "background-color: var(--smash-gender-other);"
    };
}
